# **–°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π**

# üìÑ –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π API

## v2.1.0 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
**–î–∞—Ç–∞ –≤—ã–ø—É—Å–∫–∞:** *[15.06.2025]*

### üîê HTTPS –∏ SSL
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω HTTPS —Å –ø–æ–º–æ—â—å—é Let's Encrypt.
- –ü–æ–ª—É—á–µ–Ω—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–µ—Ä–µ–∑ DuckDNS + Certbot –±–µ–∑ –ø–æ–∫—É–ø–∫–∏ –¥–æ–º–µ–Ω–∞.
- Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (`fullchain.pem` –∏ `privkey.pem`).
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS.

### üåê CORS –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –î–æ–±–∞–≤–ª–µ–Ω—ã CORS-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω `CSRF_TRUSTED_ORIGINS` –≤ Django –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ–º–µ–Ω–∞ –ø–æ HTTPS.

### üê≥ Docker –∏ Docker Compose
- –û–±–Ω–æ–≤–ª—ë–Ω `docker-compose.yml`:
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–æ–º–∞ –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `web` –æ–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`depends_on + condition: service_healthy`).
- –î–æ–±–∞–≤–ª–µ–Ω `healthcheck` –¥–ª—è MySQL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Django –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MySQL.

### üßæ Nginx
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `nginx.conf`:
  - –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ `/static/` –∏ `/media/` —á–µ—Ä–µ–∑ `alias`.
  - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Django.
  - –†–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS.
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ CORS.

### üßµ –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –û–±–Ω–æ–≤–ª—ë–Ω `entrypoint.sh`:
  - –°–æ–∑–¥–∞—é—Ç—Å—è –ø–∞–ø–∫–∏ `staticfiles` –∏ `mediafiles` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
  - –í—ã–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `appuser`.
  - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç –∏–º–µ–Ω–∏ `appuser`.

### üêû –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- –û—à–∏–±–∫–∞ 400 —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `server_name`, SSL –∏ –ø—É—Ç–µ–π.
- –û—à–∏–±–∫–∞ 502 —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (`web`) –≤ Nginx.
- –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤ —Ä–µ—à–µ–Ω–∞ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `mediafiles`.
- –ü—Ä–æ–±–ª–µ–º–∞ "Authentication credentials were not provided" —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É permissions.

---

‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ. –ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:  
- **https://lesta-start-tfidf.duckdns.org**
- **https://lesta-start-tfidf.duckdns.org/docs** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API



## üöÄ v2.0.0 ‚Äì –ö—Ä—É–ø–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–î–∞—Ç–∞ –≤—ã–ø—É—Å–∫–∞:** *[08.06.2025]*

### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ API.
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç **–∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∏—Ö –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏**.

- **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤**
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
    - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
    - –í—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
  - –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º —Ç–µ–ø–µ—Ä—å **–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∞–∫–∫–∞—É–Ω—Ç—É** ‚Äî –¥–ª—è –±–æ–ª—å—à–µ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.

- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç **—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –æ–±—ä–µ–º, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å).

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAPI**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è **—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É OpenAPI**.
  - –£–ø—Ä–æ—Å—Ç–∏–ª–æ—Å—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–∑—É—á–µ–Ω–∏–µ API —á–µ—Ä–µ–∑ Swagger UI –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

### üìå –ù–æ–≤—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
- **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
  - `POST /register` ‚Äì –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞  
  - `POST /login` ‚Äì –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç  
  - `GET /logout` ‚Äì –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ 
  - `PATCH /user/<user_id>` -  –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
  - `DELETE /user/<user_id>` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

> ‚ö†Ô∏è –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ª–µ–¥—É—é—â–∏–º –º–∞—Ä—à—Ä—É—Ç–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è **—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: 
- **–î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
  - `GET /documents/` ‚Äì –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤   
  - `GET /documents/<document_id>` ‚Äì –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - `GET /documents/<document_id>/statistics` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥–∞–Ω–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É 
  - `DELETE /documents/<document_id>` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥–∞–Ω–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É 

- **–î–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π**
  - `GET /collections/` ‚Äì –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å id –∏ —Å–ø–∏—Å–∫–æ–º –≤—Ö–æ–¥—è—â–∏—Ö –≤ –Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - `GET /collections/<collection_id>` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ id –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≤—Ö–æ–¥—è—â–∏—Ö –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é
  - `GET /collections/<collection_id>/statistics` -  –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
  - `POST /collection/<collection_id>/<document_id>` - –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
  - `DELETE /collection/<collection_id>/<document_id>` - —É–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏



---

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è API –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–º. [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API](#).


## üõ† [1.0.0] ‚Äì 29.05.2025

### ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ

- **REST API (–¥–æ—Å—Ç—É–ø –ø–æ `/lesta-api`)**
  - –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
    - `GET /status` ‚Äì –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞  
    - `GET /metrics` ‚Äì –ú–µ—Ç—Ä–∏–∫–∏  
    - `GET /version` ‚Äì –í–µ—Ä—Å–∏—è API

- **–†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤**
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Ñ–∞–π–ª–æ–≤.

- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**
  - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö Docker ‚Äî —É–ø—Ä–æ—â–µ–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

### üß™ Alpha-–≤–µ—Ä—Å–∏—è

#### ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ

- **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
  - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–ª–æ–∂–µ–Ω—ã –≤ –ø–µ—Ä–≤–æ–π alpha-—Å–±–æ—Ä–∫–µ.
